# ChatHistoryBox

ä¸€ä¸ªç®€å•çš„Chromeæ‰©å±•ï¼Œå¸®åŠ©ä½ ä¿å­˜Deepseek Chatå¯¹è¯è®°å½•ä¸ºJSONæ–‡ä»¶ã€‚

## åŠŸèƒ½ä»‹ç» â­
1. åœ¨Deepseek Chatç½‘ç«™å³ä¸‹è§’æ·»åŠ ä¸€ä¸ªä¸‹è½½æŒ‰é’®
2. ç‚¹å‡»æŒ‰é’®æ—¶è‡ªåŠ¨æå–å½“å‰é¡µé¢çš„æ‰€æœ‰èŠå¤©è®°å½•
3. å°†èŠå¤©è®°å½•ä¿å­˜ä¸ºJSONæ–‡ä»¶åˆ°ä½ çš„ç”µè„‘ä¸Š
4. æ”¯æŒæå–ä¸‰ç§ç±»å‹çš„æ¶ˆæ¯ï¼š
   - ç”¨æˆ·æé—®
   - AIæ€è€ƒè¿‡ç¨‹
   - AIæœ€ç»ˆå›ç­”ï¼ˆåŒ…æ‹¬æ ¼å¼åŒ–å†…å®¹ï¼‰

## ä½¿ç”¨æ–¹æ³• â­
1. å®‰è£…æ‰©å±•åï¼Œæ‰“å¼€ä»»æ„Deepseek Chatå¯¹è¯é¡µé¢
2. åœ¨é¡µé¢å³ä¸‹è§’å¯ä»¥çœ‹åˆ°è“è‰²çš„ä¸‹è½½æŒ‰é’®ï¼ˆğŸ’¾ï¼‰
3. ç‚¹å‡»æŒ‰é’®ï¼Œç­‰å¾…æå–å®Œæˆ
4. é€‰æ‹©ä¿å­˜ä½ç½®ï¼Œå®Œæˆä¸‹è½½

## æ–‡ä»¶ç»“æ„ â­

### æ ¸å¿ƒæ–‡ä»¶å’Œæ–‡ä»¶å¤¹
- `src/contentScripts/` - è¿™æ˜¯æœ€é‡è¦çš„æ–‡ä»¶å¤¹
  - åŒ…å«æˆ‘ä»¬çš„ä¸»è¦åŠŸèƒ½ï¼šèŠå¤©è®°å½•æå–æŒ‰é’®å’Œé€»è¾‘
  - `views/App.vue` - è¿™é‡Œå®ç°äº†æå–èŠå¤©è®°å½•çš„å…¨éƒ¨åŠŸèƒ½
  - `index.ts` - è´Ÿè´£å°†æŒ‰é’®æ³¨å…¥åˆ°deepseekç½‘é¡µä¸­
- `src/manifest.ts` - æ‰©å±•çš„"èº«ä»½è¯"
  - å®šä¹‰äº†æ‰©å±•éœ€è¦çš„æƒé™ï¼ˆä¸‹è½½ã€è®¿é—®ç½‘ç«™ç­‰ï¼‰
  - è®¾ç½®äº†å†…å®¹è„šæœ¬åŒ¹é…çš„ç½‘ç«™è§„åˆ™ï¼ˆdeepseek.com/aiï¼‰

### æ¬¡è¦æ–‡ä»¶å¤¹ï¼ˆæš‚ä¸éœ€è¦å…³æ³¨ï¼‰
  - `src/popup/` - ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ å›¾æ ‡æ˜¾ç¤ºçš„å¼¹å‡ºçª—å£
  - `src/options/` - æ‰©å±•è®¾ç½®é¡µé¢
  - `src/background/` - åå°æœåŠ¡è„šæœ¬
  - `src/assets/` - å›¾æ ‡ç­‰èµ„æºæ–‡ä»¶

## å¼€å‘æŒ‡å— â­

### å¦‚ä½•ä¿®æ”¹æå–é€»è¾‘
å¦‚æœDeepSeekç½‘ç«™çš„HTMLç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œå¯èƒ½éœ€è¦æ›´æ–°é€‰æ‹©å™¨ã€‚ä¸»è¦ä¿®æ”¹`src/contentScripts/views/App.vue`æ–‡ä»¶ä¸­çš„ä»¥ä¸‹é€‰æ‹©å™¨ï¼š

```javascript
// ç”¨æˆ·æ¶ˆæ¯é€‰æ‹©å™¨
const userMessages = Array.from(document.querySelectorAll('div[class^="fbb"]'))

// AIæ€è€ƒæ¶ˆæ¯é€‰æ‹©å™¨
const aiMessages = Array.from(document.querySelectorAll('div[class^="e16"]'))

// AIæœ€ç»ˆå›ç­”é€‰æ‹©å™¨
const aiResponseMessages = Array.from(document.querySelectorAll('div.ds-markdown.ds-markdown--block'))
```

### è°ƒè¯•æ–¹æ³•
1. å‚è€ƒ[vitesse-webextæ’ä»¶æ¨¡ç‰ˆ](https://github.com/antfu-collective/vitesse-webext)è¿›è¡Œå¼€å‘ã€‚
2. åœ¨ç»ˆç«¯è¿è¡Œ`pnpm install && pnpm run build`
3. åœ¨Chromeæµè§ˆå™¨ä¸­æ‰“å¼€æ‰©å±•ç®¡ç†é¡µé¢ (`chrome://extensions/`)
4. å¼€å¯å¼€å‘è€…æ¨¡å¼
5. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"ï¼Œé€‰æ‹©`extension`æ–‡ä»¶å¤¹
6. æ‰“å¼€Deepseek Chaté¡µé¢
7. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

### jsonæ–‡ä»¶æ•ˆæœ
<details>
<summary>ç‚¹å‡»æŸ¥çœ‹</summary>

```json
{
  "title": "DeepSeek - æ¢ç´¢æœªè‡³ä¹‹å¢ƒ",
  "url": "https://chat.deepseek.com/a/chat/s/14d6633d-bd30-4e6f-a294-03a9633f31bd",
  "messages": [
    {
      "id": "user-0",
      "role": "user",
      "content": "æµ·å—æœ‰å“ªäº›å¥½ç©çš„åœ°æ–¹"
    },
    {
      "id": "ai-response-0",
      "role": "assistant",
      "content": "<p>æµ·å—xxx</p>",
      "rawText": "æµ·å—xxx"
    },
    {
      "id": "user-1",
      "role": "user",
      "content": "æµ·å—æœ‰å“ªäº›å¥½ç©çš„åœ°æ–¹"
    },
    {
      "id": "ai-thinking-1",
      "role": "thinking",
      "content": "å—¯ï¼Œç”¨æˆ·ä¸¤æ¬¡é—®äº†åŒæ ·çš„é—®é¢˜ï¼Œxxx"
    },
    {
      "id": "ai-response-1",
      "role": "assistant",
      "content": "<p>æµ·å—xxxï¼š</p><hr><h3><strong>ä¸€ã€ä¸‰äºšï¼ˆæµ·å²›åº¦å‡å¤©èŠ±æ¿ï¼‰</strong></h3><ol start=\"1\"><li><p><strong>äºšé¾™æ¹¾</strong></p><ul><li><p>è¢«èª‰ä¸ºâ€œå¤©ä¸‹ç¬¬ä¸€æ¹¾â€ï¼Œæµ·æ°´æ¸…æ¾ˆï¼Œé€‚åˆæ¸¸æ³³ã€æ½œæ°´ã€å†²æµªã€‚</p></li><li><p>å‘¨è¾¹é«˜ç«¯é…’åº—äº‘é›†ï¼Œé€‚åˆåº¦å‡èººå¹³ã€‚</p></li></ul></li>",
      "rawText": "æµ·å—xxx"
    },
    {
      "id": "user-2",
      "role": "user",
      "content": "æˆ‘ä¸€ä¸ªäººå»ç©ï¼Œåº”è¯¥ä¼šåœ¨æµ·å£ä¸‹è½¦,xxx"
    },
    {
      "id": "ai-thinking-2",
      "role": "thinking",
      "content": "å¥½çš„ï¼Œç”¨æˆ·è®¡åˆ’åœ¨æµ·å—ç©äº”å…­å¤©xxx"
    },
    {
      "id": "ai-response-2",
      "role": "assistant",
      "content": "<p>æ ¹æ®ä½ çš„éœ€æ±‚xxxï¼š</p>",
      "rawText": "æ ¹æ®ä½ çš„éœ€æ±‚xxx"
    }
  ]
}
```

</details>
